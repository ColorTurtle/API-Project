var EtsyItems=Backbone.Model.extend({idAttribute:"_.id"}),EtsyItemsCollection=Backbone.Collection.extend({model:EtsyItems,url:"https://openapi.etsy.com/v2/listings/active.js?api_key=6ytsbcyaiiafvg560dnhbd8k&fields=title,price,description,listing_id,url&includes=Images&callback=?",parse:function(a){return a.results}}),PageView=Backbone.Model.extend({}),AboutPageView=Backbone.View.extend({className:"jumbotron",aboutTemplate:_.template($("#about-page-template").text()),initialize:function(){console.log("You at the About Page"),$(".page-copy").append(this.el),this.render()},render:function(){this.$el.html(this.aboutTemplate())}}),ContactPageView=Backbone.View.extend({className:"jumbotron",aboutTemplate:_.template($("#contact-page-template").text()),initialize:function(){console.log("You at the Contact Page"),$(".page-copy").append(this.el),this.render()},render:function(){this.$el.html(this.aboutTemplate())}}),HomePageView=Backbone.View.extend({className:"jumbotron",aboutTemplate:_.template($("#home-page-template").text()),initialize:function(){console.log("You at the Home Page"),$(".page-copy").append(this.el),this.render()},render:function(){this.$el.html(this.aboutTemplate())}}),ListView=Backbone.View.extend({tagName:"a",className:"etsy-item",initialize:function(){this.setHref(),this.render(),$(".item-list").append(this.el)},renderedTemplate:_.template($("#etsy-item-template").text()),render:function(){this.$el.html(this.renderedTemplate(this.model))},setHref:function(){console.log("setHref has been invoked");var a=this.model.get("listing_id"),b="#/items/"+a;this.$el.attr({href:b})}}),MainView=Backbone.View.extend({className:"item-mainview",initialize:function(){this.render(),$(".js-spotlight-box").html(""),$(".js-spotlight-box").append(this.el)},renderedTemplate:_.template($("#etsy-MainView-template").text()),render:function(){this.$el.html(this.renderedTemplate(this.model))}}),MainRouter=Backbone.Router.extend({routes:{"":"homePage",about:"aboutPage",contact:"contactPage",shops:"showShops","shops/:keyword":"showShops","items/:itemId":"mainView"},initialize:function(){console.log("Hey dude, A router was just born!"),this.items=new EtsyItemsCollection,this.items.on("add",function(a){new ListView({model:a})})},homePage:function(){$(".page-copy").html(""),new HomePageView,console.log("testing")},aboutPage:function(){$(".page-copy").html(""),new AboutPageView,console.log("testing")},contactPage:function(){$(".page-copy").html(""),new ContactPageView,console.log("testing")},showShops:function(a){console.log("showShops is being called by the router"),$(".item-list").html(""),a&&(this.items.url="https://api.etsy.com/v2/listings/active.js?keywords="+a+"&includes=Images&api_key=kr9rjq7dc9c24jv6fccq2hus&callback=?"),this.items.fetch()},mainView:function(a){console.log("Should be seeing the larger view",this.items);var b=this.items.find(function(b){return console.log("Do you see it?"),b.get("listing_id")==a});new MainView({model:b})}});console.log("It is time to rumble."),$(document).ready(function(){router=new MainRouter,Backbone.history.start()}),$(".js-homepage-link").on("click",function(){$(this).addClass("active"),$(this).siblings().removeClass("active")}),$(".js-aboutpage-link").on("click",function(){$(this).addClass("active"),$(this).siblings().removeClass("active")}),$(".js-contactpage-link").on("click",function(){$(this).addClass("active"),$(this).siblings().removeClass("active")});